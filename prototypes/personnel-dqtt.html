<!doctype html>
<html class="light" lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Danh sách DQTT - BAN CHQS PHƯỜNG BÌNH PHÚ</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- Alpine.js -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <script src="notification-system.js"></script>

    <script id="tailwind-config">
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#556B2F",
              "primary-dark": "#4a5d28",
              olive: "#556B2F",
              "olive-light": "#EAF0E2",
              "background-light": "#f7f7f6",
              "background-dark": "#1a1d15",
              "card-light": "#ffffff",
              "card-dark": "#1a2632",
              "text-main-light": "#0d141b",
              "text-main-dark": "#e0e6ed",
              "text-sub-light": "#4c739a",
              "text-sub-dark": "#93adc8",
              "border-light": "#e7edf3",
              "border-dark": "#304151",
            },
            fontFamily: {
              display: ["Inter", "sans-serif"],
            },
          },
        },
      };
    </script>

    <style>
      body {
        font-family: "Inter", sans-serif;
      }

      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: transparent;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 20px;
      }

      [x-cloak] {
        display: none !important;
      }
    </style>
  </head>

  <body
    class="bg-background-light dark:bg-background-dark text-text-main-light dark:text-text-main-dark font-display"
    x-data="personnelApp()"
  >
    <div class="flex h-screen">
      <!-- Sidebar -->
      <aside
        class="w-64 flex-shrink-0 bg-white border-r border-gray-200 flex flex-col p-4 hidden md:flex h-full"
      >
        <div class="flex gap-3 px-2 py-2 mb-4">
          <img src="logo-dqtv.png" alt="Logo" class="size-10 object-contain" />
          <div class="flex flex-col justify-center">
            <h1 class="text-gray-900 text-base font-bold">
              BAN CHQS PHƯỜNG BÌNH PHÚ
            </h1>
            <p class="text-gray-500 text-xs">Hệ thống quản lý</p>
          </div>
        </div>

        <!-- User Profile -->
        <div
          class="mb-4 p-3 bg-gradient-to-r from-olive/10 to-olive/5 rounded-lg border border-olive/20"
        >
          <div class="flex items-center gap-2">
            <div class="relative">
              <div
                class="size-10 rounded-full bg-olive/20 flex items-center justify-center"
              >
                <span class="material-symbols-outlined text-olive text-2xl"
                  >account_circle</span
                >
              </div>
              <span
                class="absolute bottom-0 right-0 size-3 bg-green-500 border-2 border-white rounded-full"
              ></span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-bold text-gray-900 truncate">
                Administrator
              </p>
              <p class="text-xs text-gray-600">
                <span
                  class="px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-700"
                >
                  Admin
                </span>
              </p>
            </div>
          </div>
        </div>

        <nav class="flex flex-col gap-2">
          <a
            class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors"
            href="index.html"
          >
            <span class="material-symbols-outlined text-gray-600">home</span>
            <p class="text-sm font-medium text-gray-600">Trang chủ</p>
          </a>
          <!-- Dashboard Submenu -->
          <div>
            <div class="flex items-center gap-3 px-3 py-2 text-gray-700">
              <span class="material-symbols-outlined text-gray-600"
                >assessment</span
              >
              <p class="text-sm font-bold text-gray-700">Dashboard</p>
            </div>
            <div class="ml-6 space-y-1 border-l-2 border-gray-200 pl-3">
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-50 text-gray-600"
                href="dashboard-tong-hop.html"
              >
                <span class="size-1.5 rounded-full bg-gray-400"></span>
                <p class="text-sm font-medium">Tổng hợp</p>
              </a>
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-50 text-gray-600"
                href="dashboard-facebook.html"
              >
                <span class="size-1.5 rounded-full bg-gray-400"></span>
                <p class="text-sm font-medium">Facebook</p>
              </a>
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-50 text-gray-600"
                href="dashboard-kho.html"
              >
                <span class="size-1.5 rounded-full bg-gray-400"></span>
                <p class="text-sm font-medium">Kho</p>
              </a>
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-50 text-gray-600"
                href="dashboard-luc-luong.html"
              >
                <span class="size-1.5 rounded-full bg-gray-400"></span>
                <p class="text-sm font-medium">Lực lượng</p>
              </a>
            </div>
          </div>
          <div>
            <div class="flex items-center gap-3 px-3 py-2 text-gray-700">
              <span class="material-symbols-outlined text-gray-600">event</span>
              <p class="text-sm font-bold text-gray-700">Hoạt động</p>
            </div>
            <div class="ml-6 space-y-1 border-l-2 border-gray-200 pl-3">
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-50 text-gray-600"
                href="activity-list.html"
              >
                <span class="size-1.5 rounded-full bg-gray-400"></span>
                <p class="text-sm font-medium">Danh sách</p>
              </a>
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-50 text-gray-600"
                href="activity-calendar.html"
              >
                <span class="size-1.5 rounded-full bg-gray-400"></span>
                <p class="text-sm font-medium">Lịch</p>
              </a>
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-50 text-gray-600"
                href="module-lich-truc.html"
              >
                <span class="size-1.5 rounded-full bg-gray-400"></span>
                <p class="text-sm font-medium">Lịch trực</p>
              </a>
            </div>
          </div>
          <!-- Nhân sự with submenu -->
          <div>
            <div class="flex items-center gap-3 px-3 py-2 text-olive">
              <span
                class="material-symbols-outlined"
                style="font-variation-settings: &quot;FILL&quot; 1"
                >group</span
              >
              <p class="text-sm font-bold">Nhân sự</p>
            </div>
            <div class="ml-6 space-y-1 border-l-2 border-olive/30 pl-3">
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-50 text-gray-600"
                href="personnel-tuoi17.html"
              >
                <span class="size-1.5 rounded-full bg-gray-400"></span>
                <p class="text-sm font-medium">Tuổi 17</p>
              </a>
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-50 text-gray-600"
                href="personnel-nguon.html"
              >
                <span class="size-1.5 rounded-full bg-gray-400"></span>
                <p class="text-sm font-medium">Nguồn</p>
              </a>
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-50 text-gray-600"
                href="personnel-qndb.html"
              >
                <span class="size-1.5 rounded-full bg-gray-400"></span>
                <p class="text-sm font-medium">Quân nhân dự bị</p>
              </a>
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-olive/10 text-olive"
                href="personnel-dqtt.html"
              >
                <span class="size-1.5 rounded-full bg-olive"></span>
                <p class="text-sm font-bold">DQTT</p>
              </a>
              <a
                class="flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-50 text-gray-600"
                href="personnel-dqcd.html"
              >
                <span class="size-1.5 rounded-full bg-gray-400"></span>
                <p class="text-sm font-medium">DQCĐ</p>
              </a>
            </div>
          </div>
          <a
            class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors"
            href="module3-inventory-complete.html"
          >
            <span class="material-symbols-outlined text-gray-600"
              >inventory_2</span
            >
            <p class="text-sm font-medium text-gray-600">Kho</p>
          </a>
          <a
            class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors"
            href="module4-documents-complete.html"
          >
            <span class="material-symbols-outlined text-gray-600">folder</span>
            <p class="text-sm font-medium text-gray-600">Tài liệu</p>
          </a>
          <a
            class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors"
            href="CMS/index.html"
          >
            <span class="material-symbols-outlined text-gray-600"
              >language</span
            >
            <p class="text-sm font-medium text-gray-600">Trang thông tin</p>
          </a>
        </nav>

        <div class="mt-auto pt-4 border-t border-gray-200 space-y-2">
          <a
            @click.prevent="logout()"
            href="#"
            class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-bold bg-olive text-white hover:bg-olive/90 transition-colors justify-center cursor-pointer"
          >
            <span class="material-symbols-outlined text-xl">logout</span>
            <span>Đăng xuất</span>
          </a>
        </div>
      </aside>

      <!-- Main Content -->
      <div class="flex-1 flex flex-col h-screen overflow-y-auto">
        <!-- Header -->
        <header
          class="sticky top-0 z-30 bg-white/70 dark:bg-card-dark/70 backdrop-blur-lg border-b border-border-light dark:border-border-dark"
        >
          <div class="flex items-center justify-between px-6 h-16">
            <div class="flex items-center gap-2 text-sm">
              <a
                class="text-text-sub-light dark:text-text-sub-dark hover:text-primary font-medium"
                href="#"
                >Nhân sự</a
              >
              <span class="text-text-sub-light dark:text-text-sub-dark">/</span>
              <span
                class="text-text-main-light dark:text-text-main-dark font-medium"
                x-text="currentView === 'list' ? 'Danh sách nhân sự' : currentView === 'detail' ? 'Chi tiết nhân sự' : 'Thêm/Chỉnh sửa'"
              ></span>
            </div>
            <div class="flex items-center gap-4">
              <div
                class="hidden sm:flex items-center bg-background-light dark:bg-background-dark rounded-lg px-3 py-2 border border-border-light dark:border-border-dark w-64"
              >
                <span
                  class="material-symbols-outlined text-text-sub-light dark:text-text-sub-dark text-[20px]"
                  >search</span
                >
                <input
                  class="bg-transparent border-none text-sm ml-2 focus:ring-0 w-full placeholder:text-text-sub-light"
                  placeholder="Tìm kiếm nhân sự..."
                />
              </div>
              <!-- Notification Bell System -->
              <div x-data="notificationBell" class="relative">
                <button
                  @click="toggleDropdown()"
                  class="relative p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors"
                  :class="{'bg-gray-100 dark:bg-white/10': isOpen}"
                >
                  <span class="material-symbols-outlined">notifications</span>
                  <span
                    x-show="unreadCount > 0"
                    class="absolute top-2 right-2 size-2 bg-red-500 rounded-full"
                  ></span>
                  <span
                    x-show="unreadCount > 0"
                    x-text="unreadCount"
                    class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full px-1.5 py-0.5 min-w-[20px] text-center"
                  ></span>
                </button>
                <div
                  x-show="isOpen"
                  @click.away="isOpen = false"
                  class="absolute right-0 mt-2 w-96 bg-white dark:bg-card-dark rounded-xl shadow-2xl border border-gray-200 dark:border-border-dark z-50"
                  style="display: none"
                  x-cloak
                >
                  <div
                    class="px-4 py-3 border-b border-gray-200 dark:border-border-dark flex items-center justify-between"
                  >
                    <h3 class="text-sm font-bold text-gray-900 dark:text-white">
                      Thông báo nhiệm vụ
                    </h3>
                    <span
                      class="text-xs text-gray-500"
                      x-text="notifications.length + ' nhiệm vụ'"
                    ></span>
                  </div>
                  <div class="max-h-96 overflow-y-auto">
                    <template x-if="notifications.length === 0">
                      <div class="p-8 text-center">
                        <span
                          class="material-symbols-outlined text-4xl text-gray-300"
                          >notifications_off</span
                        >
                        <p class="text-sm text-gray-500 mt-2">
                          Không có thông báo mới
                        </p>
                      </div>
                    </template>
                    <div
                      class="divide-y divide-gray-100 dark:divide-border-dark"
                    >
                      <template x-for="notif in notifications" :key="notif.id">
                        <div
                          class="p-4 hover:bg-gray-50 dark:hover:bg-background-dark transition-colors"
                        >
                          <div class="flex items-start gap-3">
                            <div
                              class="bg-yellow-100 rounded-lg p-2 flex-shrink-0"
                            >
                              <span
                                class="material-symbols-outlined text-yellow-600 text-xl"
                                >assignment</span
                              >
                            </div>
                            <div class="flex-1 min-w-0">
                              <p
                                class="text-sm font-semibold text-gray-900 dark:text-white mb-1"
                                x-text="notif.taskName"
                              ></p>
                              <div class="space-y-1 mb-2">
                                <p
                                  class="text-xs text-gray-600 dark:text-text-sub-dark flex items-center gap-1"
                                >
                                  <span
                                    class="material-symbols-outlined text-[14px]"
                                    >location_on</span
                                  >
                                  <span x-text="notif.location"></span>
                                </p>
                                <p
                                  class="text-xs text-gray-600 dark:text-text-sub-dark flex items-center gap-1"
                                >
                                  <span
                                    class="material-symbols-outlined text-[14px]"
                                    >schedule</span
                                  >
                                  <span
                                    >Thời hạn:
                                    <span x-text="notif.deadline"></span
                                  ></span>
                                </p>
                              </div>
                              <div class="flex gap-2">
                                <a
                                  :href="'activity-detail.html?id=' + notif.activityId"
                                  class="text-xs text-olive hover:underline font-medium"
                                  >Xem chi tiết</a
                                >
                                <button
                                  @click="confirmRead(notif.id)"
                                  class="text-xs text-blue-600 hover:underline font-medium"
                                >
                                  Xác nhận đã đọc
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </template>
                    </div>
                  </div>
                  <div
                    x-show="notifications.length > 0"
                    class="px-4 py-3 border-t border-gray-200 dark:border-border-dark bg-gray-50 dark:bg-background-dark"
                  >
                    <button
                      @click="markAllRead()"
                      class="text-xs text-olive hover:underline font-medium w-full text-center"
                    >
                      Đánh dấu tất cả đã đọc
                    </button>
                  </div>
                </div>
              </div>
              <button
                class="bg-center bg-no-repeat bg-cover rounded-full size-10 ring-2 ring-white dark:ring-border-dark"
                style="
                  background-image: url(&quot;https://lh3.googleusercontent.com/aida-public/AB6AXuAeStNR4viQhQgkrc1Et3N4H2NRwHK-mA3FeLN52Co0r3K-dyy_k3hqImmJTHntw3CUeW7Fqj38Nw224ivjPhuPmZtHHAbVuI2idRB656bJZZi3hwGSHN5wVdwVw6TTPiovvguTa7U6XdNhwOCFzUVumRj6YtiudYtiyC5oq9tS3suc-2KgKZzqwybhKiDtjNRK-64Dwh7y6dZIghHWcokhn868gOVT00Cvq9YnXHAViJbYW78lUpouNnO6eNyyG-e6g4Bf7lrLHLU&quot;);
                "
              ></button>
            </div>
          </div>
        </header>

        <!-- Sub Navigation -->
        <nav class="bg-olive rounded-lg p-2 mx-6 mt-6 shadow-md">
          <div class="flex items-center space-x-2 overflow-x-auto">
            <button
              @click="currentView = 'list'"
              :class="currentView === 'list' ? 'bg-white/20 text-white font-bold' : 'text-white/80 hover:bg-white/10'"
              class="px-4 py-2 rounded-md text-sm font-medium whitespace-nowrap transition-colors"
            >
              Danh sách nhân sự
            </button>
            <button
              @click="currentView = 'detail'"
              :class="currentView === 'detail' ? 'bg-white/20 text-white font-bold' : 'text-white/80 hover:bg-white/10'"
              class="px-4 py-2 rounded-md text-sm font-medium whitespace-nowrap transition-colors"
            >
              Chi tiết nhân sự
            </button>
            <button
              @click="currentView = 'edit'"
              :class="currentView === 'edit' ? 'bg-white/20 text-white font-bold' : 'text-white/80 hover:bg-white/10'"
              class="px-4 py-2 rounded-md text-sm font-medium whitespace-nowrap transition-colors"
            >
              Thêm nhân sự mới
            </button>
          </div>
        </nav>

        <main class="flex-1 p-6">
          <!-- DANH SÁCH NHÂN SỰ -->
          <div x-show="currentView === 'list'" x-cloak>
            <div
              class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8"
            >
              <div>
                <h1
                  class="text-3xl font-black tracking-tight text-text-main-light dark:text-white"
                >
                  Danh Sách Nhân Sự
                </h1>
                <p
                  class="text-text-sub-light dark:text-text-sub-dark mt-1 text-sm"
                >
                  Quản lý hồ sơ dân quân tự vệ địa phương
                </p>
              </div>
              <button
                @click="currentView = 'edit'"
                class="flex items-center gap-2 bg-primary hover:bg-primary-dark text-white px-5 py-2.5 rounded-lg font-bold text-sm transition-colors shadow-lg shadow-primary/30"
              >
                <span class="material-symbols-outlined text-[20px]">add</span>
                <span>Thêm Nhân sự</span>
              </button>
            </div>

            <!-- Filters -->
            <div
              class="bg-white dark:bg-card-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark p-4 mb-8 flex flex-col lg:flex-row gap-4 items-center"
            >
              <div class="relative w-full lg:w-96">
                <span
                  class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 material-symbols-outlined"
                  >search</span
                >
                <input
                  class="w-full h-11 pl-10 pr-4 bg-slate-50 dark:bg-gray-800 border-slate-200 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all text-slate-900 dark:text-white placeholder:text-slate-400"
                  placeholder="Tìm kiếm theo tên, mã hồ sơ..."
                  type="text"
                />
              </div>
              <div
                class="hidden lg:block w-px h-8 bg-slate-200 dark:bg-gray-700"
              ></div>
              <div class="flex flex-wrap gap-3 w-full lg:w-auto flex-1">
                <button
                  class="flex items-center gap-2 px-3 py-2 bg-slate-100 hover:bg-slate-200 dark:bg-gray-800 dark:hover:bg-gray-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300 transition-colors whitespace-nowrap"
                >
                  <span>Vai trò</span>
                  <span class="material-symbols-outlined text-[18px]"
                    >expand_more</span
                  >
                </button>
                <button
                  class="flex items-center gap-2 px-3 py-2 bg-slate-100 hover:bg-slate-200 dark:bg-gray-800 dark:hover:bg-gray-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300 transition-colors whitespace-nowrap"
                >
                  <span>Đội hình</span>
                  <span class="material-symbols-outlined text-[18px]"
                    >expand_more</span
                  >
                </button>
                <button
                  class="flex items-center gap-2 px-3 py-2 bg-slate-100 hover:bg-slate-200 dark:bg-gray-800 dark:hover:bg-gray-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300 transition-colors whitespace-nowrap"
                >
                  <span>Trạng thái</span>
                  <span class="material-symbols-outlined text-[18px]"
                    >expand_more</span
                  >
                </button>
                <div class="ml-auto flex items-center">
                  <button
                    class="text-sm text-slate-500 hover:text-primary font-medium flex items-center gap-1 transition-colors"
                  >
                    <span class="material-symbols-outlined text-[18px]"
                      >filter_alt_off</span
                    >
                    <span class="hidden sm:inline">Xóa bộ lọc</span>
                  </button>
                </div>
              </div>
            </div>

            <!-- Personnel Cards Grid -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
              <template x-for="person in personnel" :key="person.id">
                <div
                  @click="selectPerson(person); currentView = 'detail'"
                  class="group relative bg-white dark:bg-card-dark rounded-xl border border-slate-200 dark:border-gray-700 hover:border-primary/50 hover:shadow-lg transition-all duration-300 overflow-hidden cursor-pointer"
                >
                  <div class="absolute top-4 right-4">
                    <button
                      @click.stop
                      class="text-slate-400 hover:text-primary p-1 rounded-full hover:bg-slate-100 dark:hover:bg-gray-700 transition-colors"
                    >
                      <span class="material-symbols-outlined">more_vert</span>
                    </button>
                  </div>
                  <div class="p-6 flex flex-col items-center text-center">
                    <div class="relative mb-4">
                      <div
                        class="w-24 h-24 rounded-full bg-cover bg-center border-4 border-slate-50 dark:border-gray-800 shadow-sm"
                        :style="`background-image: url('${person.avatar}')`"
                      ></div>
                      <div
                        class="absolute bottom-1 right-1 w-5 h-5 border-2 border-white dark:border-card-dark rounded-full"
                        :class="person.status === 'active' ? 'bg-green-500' : person.status === 'leave' ? 'bg-amber-400' : 'bg-slate-400'"
                      ></div>
                    </div>
                    <h3
                      class="text-lg font-bold text-slate-900 dark:text-white mb-1"
                      x-text="person.name"
                    ></h3>
                    <p
                      class="text-sm text-slate-500 dark:text-slate-400 mb-4"
                      x-text="person.unit"
                    ></p>
                    <div class="flex items-center gap-2 mb-6">
                      <span
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border"
                        :class="{
                                                  'bg-blue-100 text-blue-800 border-blue-200': person.role === 'DQTT',
                                                   'bg-red-100 text-red-800 border-red-200': person.role === 'Quản trị viên',
                                                  'bg-emerald-100 text-emerald-800 border-emerald-200': person.role === 'DQCĐ'
                                              }"
                        x-text="person.role"
                      ></span>
                      <span
                        class="inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600"
                      >
                        <span
                          class="w-1.5 h-1.5 rounded-full"
                          :class="person.status === 'active' ? 'bg-green-500' : person.status === 'leave' ? 'bg-amber-400' : 'bg-slate-400'"
                        ></span>
                        <span x-text="person.statusLabel"></span>
                      </span>
                    </div>
                    <div class="flex w-full gap-3 mt-auto">
                      <button
                        @click.stop="selectPerson(person); currentView = 'detail'"
                        class="flex-1 flex items-center justify-center gap-2 h-9 rounded-lg border border-slate-200 dark:border-gray-600 text-slate-700 dark:text-slate-300 text-sm font-medium hover:bg-slate-50 dark:hover:bg-gray-700 transition-colors"
                      >
                        <span class="material-symbols-outlined text-[18px]"
                          >visibility</span
                        >
                        Chi tiết
                      </button>
                      <button
                        @click.stop="selectPerson(person); currentView = 'edit'"
                        class="h-9 w-9 flex items-center justify-center rounded-lg border border-slate-200 dark:border-gray-600 text-slate-500 hover:text-primary hover:border-primary/50 transition-colors"
                      >
                        <span class="material-symbols-outlined text-[18px]"
                          >edit</span
                        >
                      </button>
                    </div>
                  </div>
                </div>
              </template>
            </div>

            <!-- Pagination -->
            <div
              class="mt-12 flex flex-col sm:flex-row items-center justify-between border-t border-slate-200 dark:border-gray-700 pt-6 gap-4"
            >
              <p class="text-sm text-slate-500 dark:text-slate-400">
                Hiển thị
                <span class="font-bold text-slate-900 dark:text-white">1</span>
                đến
                <span class="font-bold text-slate-900 dark:text-white">6</span>
                trong tổng số
                <span class="font-bold text-slate-900 dark:text-white"
                  >128</span
                >
                nhân sự
              </p>
              <div class="flex items-center gap-1">
                <button
                  class="flex items-center justify-center size-9 rounded-lg border border-slate-200 dark:border-gray-700 bg-white dark:bg-card-dark text-slate-500 hover:bg-slate-50 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  <span class="material-symbols-outlined text-[20px]"
                    >chevron_left</span
                  >
                </button>
                <button
                  class="size-9 rounded-lg bg-primary text-white font-medium text-sm"
                >
                  1
                </button>
                <button
                  class="size-9 rounded-lg border border-transparent hover:bg-slate-100 dark:hover:bg-gray-800 text-slate-600 dark:text-slate-300 font-medium text-sm transition-colors"
                >
                  2
                </button>
                <button
                  class="size-9 rounded-lg border border-transparent hover:bg-slate-100 dark:hover:bg-gray-800 text-slate-600 dark:text-slate-300 font-medium text-sm transition-colors"
                >
                  3
                </button>
                <span class="px-2 text-slate-400">...</span>
                <button
                  class="size-9 rounded-lg border border-transparent hover:bg-slate-100 dark:hover:bg-gray-800 text-slate-600 dark:text-slate-300 font-medium text-sm transition-colors"
                >
                  22
                </button>
                <button
                  class="flex items-center justify-center size-9 rounded-lg border border-slate-200 dark:border-gray-700 bg-white dark:bg-card-dark text-slate-500 hover:bg-slate-50 dark:hover:bg-gray-800"
                >
                  <span class="material-symbols-outlined text-[20px]"
                    >chevron_right</span
                  >
                  ```
                </button>
              </div>
            </div>
          </div>

          <!-- CHI TIẾT NHÂN SỰ -->
          <div x-show="currentView === 'detail'" x-cloak>
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
              <!-- Left Sidebar -->
              <aside class="lg:col-span-4 xl:col-span-3 flex flex-col gap-6">
                <!-- Profile Card -->
                <div
                  class="bg-white dark:bg-card-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark p-6 flex flex-col items-center relative overflow-hidden"
                >
                  <div
                    class="absolute top-0 left-0 w-full h-24 bg-gradient-to-r from-olive/20 to-primary/20"
                  ></div>
                  <div class="relative z-10 mt-8 mb-4">
                    <div
                      class="size-32 rounded-full border-4 border-white shadow-md bg-cover bg-center"
                      :style="`background-image: url('${selectedPerson?.avatar}')`"
                    ></div>
                    <div
                      class="absolute bottom-1 right-1 bg-green-500 border-2 border-white size-5 rounded-full"
                      title="Online"
                    ></div>
                  </div>
                  <h1
                    class="text-xl font-bold text-text-main-light dark:text-white text-center"
                    x-text="selectedPerson?.name"
                  ></h1>
                  <div class="flex items-center gap-2 mt-1 mb-4">
                    <span
                      class="bg-olive/10 text-olive text-xs font-bold px-2 py-0.5 rounded border border-olive/20"
                      >Tiểu Đội Trưởng</span
                    >
                    <span
                      class="text-text-sub-light dark:text-text-sub-dark text-sm"
                      >| Đội 3</span
                    >
                  </div>
                  <div
                    class="flex items-center gap-3 bg-slate-50 dark:bg-background-dark px-4 py-2 rounded-lg w-full justify-between mb-6"
                  >
                    <span
                      class="text-sm font-medium text-text-sub-light dark:text-text-sub-dark"
                      >Trạng thái hoạt động</span
                    >
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input checked type="checkbox" class="sr-only peer" />
                      <div
                        class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"
                      ></div>
                    </label>
                  </div>
                  <div class="grid grid-cols-2 gap-3 w-full">
                    <button
                      @click="currentView = 'edit'"
                      class="flex items-center justify-center gap-2 bg-primary hover:bg-primary-dark text-white text-sm font-semibold h-10 rounded-lg transition-colors shadow-sm shadow-primary/30"
                    >
                      <span class="material-symbols-outlined text-[18px]"
                        >edit</span
                      >
                      Chỉnh sửa
                    </button>
                    <button
                      class="flex items-center justify-center gap-2 bg-white dark:bg-background-dark border border-border-light dark:border-border-dark hover:bg-gray-50 dark:hover:bg-gray-800 text-text-main-light dark:text-white text-sm font-semibold h-10 rounded-lg transition-colors"
                    >
                      <span class="material-symbols-outlined text-[18px]"
                        >picture_as_pdf</span
                      >
                      Xuất PDF
                    </button>
                  </div>
                </div>

                <!-- Personal Info Card -->
                <div
                  class="bg-white dark:bg-card-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark overflow-hidden"
                >
                  <div
                    class="px-6 py-4 border-b border-border-light dark:border-border-dark bg-gray-50/50 dark:bg-background-dark/50"
                  >
                    <h3
                      class="text-base font-bold text-text-main-light dark:text-white"
                    >
                      Thông tin cá nhân
                    </h3>
                  </div>
                  <div class="p-6 flex flex-col gap-5">
                    <div class="flex flex-col gap-1">
                      <span
                        class="text-xs font-medium text-text-sub-light dark:text-text-sub-dark uppercase tracking-wide"
                        >Mã định danh</span
                      >
                      <div class="flex items-center gap-2">
                        <span
                          class="material-symbols-outlined text-olive text-[20px]"
                          >badge</span
                        >
                        <span
                          class="text-text-main-light dark:text-white font-medium"
                          x-text="selectedPerson?.code"
                        ></span>
                      </div>
                    </div>
                    <div class="flex flex-col gap-1">
                      <span
                        class="text-xs font-medium text-text-sub-light dark:text-text-sub-dark uppercase tracking-wide"
                        >Ngày sinh</span
                      >
                      <div class="flex items-center gap-2">
                        <span
                          class="material-symbols-outlined text-olive text-[20px]"
                          >cake</span
                        >
                        <span
                          class="text-text-main-light dark:text-white"
                          x-text="selectedPerson?.dob"
                        ></span>
                      </div>
                    </div>
                    <div class="flex flex-col gap-1">
                      <span
                        class="text-xs font-medium text-text-sub-light dark:text-text-sub-dark uppercase tracking-wide"
                        >Liên hệ</span
                      >
                      <div class="flex items-center gap-2">
                        <span
                          class="material-symbols-outlined text-olive text-[20px]"
                          >call</span
                        >
                        <span
                          class="text-text-main-light dark:text-white"
                          x-text="selectedPerson?.phone"
                        ></span>
                      </div>
                      <div class="flex items-center gap-2 mt-1">
                        <span
                          class="material-symbols-outlined text-olive text-[20px]"
                          >mail</span
                        >
                        <a
                          class="text-primary hover:underline truncate"
                          :href="`mailto:${selectedPerson?.email}`"
                          x-text="selectedPerson?.email"
                        ></a>
                      </div>
                    </div>
                    <div class="flex flex-col gap-1">
                      <span
                        class="text-xs font-medium text-text-sub-light dark:text-text-sub-dark uppercase tracking-wide"
                        >Địa chỉ</span
                      >
                      <div class="flex items-start gap-2">
                        <span
                          class="material-symbols-outlined text-olive text-[20px] mt-0.5"
                          >home_pin</span
                        >
                        <span
                          class="text-text-main-light dark:text-white leading-snug"
                          x-text="selectedPerson?.address"
                        ></span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Unit Info Card -->
                <div
                  class="bg-white dark:bg-card-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark overflow-hidden"
                >
                  <div
                    class="px-6 py-4 border-b border-border-light dark:border-border-dark bg-gray-50/50 dark:bg-background-dark/50 flex justify-between items-center"
                  >
                    <h3
                      class="text-base font-bold text-text-main-light dark:text-white"
                    >
                      Đơn vị quản lý
                    </h3>
                    <span
                      class="material-symbols-outlined text-text-sub-light dark:text-text-sub-dark"
                      >shield</span
                    >
                  </div>
                  <div class="p-6">
                    <div class="flex items-center gap-4">
                      <div
                        class="size-12 rounded-lg bg-olive/10 flex-shrink-0 flex items-center justify-center text-olive"
                      >
                        <span class="material-symbols-outlined text-[28px]"
                          >account_balance</span
                        >
                      </div>
                      <div>
                        <p
                          class="text-sm font-bold text-text-main-light dark:text-white"
                        >
                          Ban CHQS Xã Tân Bình
                        </p>
                        <p
                          class="text-xs text-text-sub-light dark:text-text-sub-dark mt-0.5"
                        >
                          Tiểu đoàn 2 - Quân khu 7
                        </p>
                      </div>
                    </div>
                    <div
                      class="mt-4 pt-4 border-t border-dashed border-border-light dark:border-border-dark grid grid-cols-2 gap-4"
                    >
                      <div>
                        <span
                          class="text-xs text-text-sub-light dark:text-text-sub-dark"
                          >Ngày nhập ngũ</span
                        >
                        <p
                          class="text-sm font-medium text-text-main-light dark:text-white"
                        >
                          01/02/2020
                        </p>
                      </div>
                      <div>
                        <span
                          class="text-xs text-text-sub-light dark:text-text-sub-dark"
                          >Cấp bậc</span
                        >
                        <p
                          class="text-sm font-medium text-text-main-light dark:text-white"
                        >
                          SQ Dự bị
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </aside>

              <!-- Main Content -->
              <section class="lg:col-span-8 xl:col-span-9 flex flex-col gap-6">
                <!-- Tabs -->
                <div
                  class="bg-white dark:bg-card-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark px-2 pt-2 sticky top-4 z-40"
                >
                  <div class="flex items-center gap-1 overflow-x-auto">
                    <button
                      class="flex items-center gap-2 px-4 py-3 border-b-2 border-primary text-primary font-semibold text-sm transition-colors whitespace-nowrap bg-primary/5 rounded-t-lg"
                    >
                      <span class="material-symbols-outlined text-[20px]"
                        >history</span
                      >
                      Lịch sử hoạt động
                    </button>
                    <button
                      class="flex items-center gap-2 px-4 py-3 border-b-2 border-transparent text-text-sub-light dark:text-text-sub-dark hover:text-text-main-light dark:hover:text-white hover:bg-gray-50 dark:hover:bg-background-dark font-medium text-sm transition-colors whitespace-nowrap rounded-t-lg"
                    >
                      <span class="material-symbols-outlined text-[20px]"
                        >construction</span
                      >
                      Thiết bị được giao
                      <span
                        class="bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-[10px] font-bold px-1.5 py-0.5 rounded-full border border-gray-200 dark:border-gray-600"
                        >3</span
                      >
                    </button>
                    <button
                      class="flex items-center gap-2 px-4 py-3 border-b-2 border-transparent text-text-sub-light dark:text-text-sub-dark hover:text-text-main-light dark:hover:text-white hover:bg-gray-50 dark:hover:bg-background-dark font-medium text-sm transition-colors whitespace-nowrap rounded-t-lg"
                    >
                      <span class="material-symbols-outlined text-[20px]"
                        >school</span
                      >
                      Hồ sơ huấn luyện
                      <span
                        class="bg-olive/10 text-olive text-[10px] font-bold px-1.5 py-0.5 rounded-full border border-olive/20"
                        >9/10</span
                      >
                    </button>
                    <button
                      class="flex items-center gap-2 px-4 py-3 border-b-2 border-transparent text-text-sub-light dark:text-text-sub-dark hover:text-text-main-light dark:hover:text-white hover:bg-gray-50 dark:hover:bg-background-dark font-medium text-sm transition-colors whitespace-nowrap rounded-t-lg"
                    >
                      <span class="material-symbols-outlined text-[20px]"
                        >folder_open</span
                      >
                      Tài liệu
                    </button>
                  </div>
                </div>

                <!-- Activity Timeline -->
                <div
                  class="bg-white dark:bg-card-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark p-6"
                >
                  <div class="flex justify-between items-center mb-6">
                    <h3
                      class="text-lg font-bold text-text-main-light dark:text-white"
                    >
                      Hoạt động gần đây
                    </h3>
                    <div class="flex gap-2">
                      <select
                        class="form-select text-xs border-border-light dark:border-border-dark rounded-lg text-text-main-light dark:text-white focus:border-primary focus:ring-primary py-1.5 pl-3 pr-8 bg-white dark:bg-background-dark"
                      >
                        <option>Tháng này</option>
                        <option>Tháng trước</option>
                        <option>Tất cả</option>
                      </select>
                      <button
                        class="text-primary hover:bg-primary/5 p-1.5 rounded-lg transition-colors"
                      >
                        <span class="material-symbols-outlined"
                          >filter_list</span
                        >
                      </button>
                    </div>
                  </div>
                  <div
                    class="relative pl-4 sm:pl-6 border-l-2 border-border-light dark:border-border-dark space-y-8"
                  >
                    <!-- Activity 1 -->
                    <div class="relative group">
                      <div
                        class="absolute -left-[29px] sm:-left-[31px] top-1 size-4 rounded-full border-2 border-white bg-primary shadow-sm ring-4 ring-primary/10"
                      ></div>
                      <div
                        class="flex flex-col sm:flex-row sm:items-start gap-4"
                      >
                        <div
                          class="flex-1 bg-slate-50 dark:bg-background-dark rounded-lg border border-border-light dark:border-border-dark p-4 hover:border-primary/30 transition-colors"
                        >
                          <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center gap-2">
                              <span
                                class="bg-primary/10 text-primary p-1 rounded"
                              >
                                <span
                                  class="material-symbols-outlined text-[18px]"
                                  >local_police</span
                                >
                              </span>
                              <span
                                class="font-bold text-text-main-light dark:text-white"
                                >Tuần tra an ninh đêm</span
                              >
                            </div>
                            <span
                              class="text-xs font-medium text-text-sub-light dark:text-text-sub-dark whitespace-nowrap"
                              >Hôm qua, 22:00</span
                            >
                          </div>
                          <p
                            class="text-sm text-text-sub-light dark:text-text-sub-dark mb-3"
                          >
                            Thực hiện tuần tra khu vực 4, Ấp Bắc. Không phát
                            hiện dấu hiệu bất thường. Báo cáo tình hình ổn định.
                          </p>
                          <div class="flex items-center gap-2 mt-3">
                            <span
                              class="inline-flex items-center gap-1 text-xs font-medium bg-white dark:bg-card-dark border border-border-light dark:border-border-dark px-2 py-1 rounded text-text-sub-light dark:text-text-sub-dark"
                            >
                              <span
                                class="material-symbols-outlined text-[14px]"
                                >check_circle</span
                              >
                              Hoàn thành
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Activity 2 -->
                    <div class="relative group">
                      <div
                        class="absolute -left-[29px] sm:-left-[31px] top-1 size-4 rounded-full border-2 border-white bg-olive shadow-sm"
                      ></div>
                      <div
                        class="flex flex-col sm:flex-row sm:items-start gap-4"
                      >
                        <div
                          class="flex-1 bg-slate-50 dark:bg-background-dark rounded-lg border border-border-light dark:border-border-dark p-4 hover:border-olive/30 transition-colors"
                        >
                          <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center gap-2">
                              <span class="bg-olive/10 text-olive p-1 rounded">
                                <span
                                  class="material-symbols-outlined text-[18px]"
                                  >groups</span
                                >
                              </span>
                              <span
                                class="font-bold text-text-main-light dark:text-white"
                                >Họp giao ban tuần</span
                              >
                            </div>
                            <span
                              class="text-xs font-medium text-text-sub-light dark:text-text-sub-dark whitespace-nowrap"
                              >10/05/2024, 08:30</span
                            >
                          </div>
                          <p
                            class="text-sm text-text-sub-light dark:text-text-sub-dark"
                          >
                            Tham gia họp triển khai kế hoạch phòng chống thiên
                            tai cấp xã. Đã nhận nhiệm vụ chuẩn bị trang thiết
                            bị.
                          </p>
                          <div class="flex items-center gap-2 mt-3">
                            <span
                              class="inline-flex items-center gap-1 text-xs font-medium bg-white dark:bg-card-dark border border-border-light dark:border-border-dark px-2 py-1 rounded text-text-sub-light dark:text-text-sub-dark"
                            >
                              <span
                                class="material-symbols-outlined text-[14px]"
                                >check_circle</span
                              >
                              Đã điểm danh
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Activity 3 -->
                    <div class="relative group">
                      <div
                        class="absolute -left-[29px] sm:-left-[31px] top-1 size-4 rounded-full border-2 border-white bg-gray-400 shadow-sm"
                      ></div>
                      <div
                        class="flex flex-col sm:flex-row sm:items-start gap-4"
                      >
                        <div
                          class="flex-1 bg-slate-50 dark:bg-background-dark rounded-lg border border-border-light dark:border-border-dark p-4"
                        >
                          <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center gap-2">
                              <span
                                class="bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 p-1 rounded"
                              >
                                <span
                                  class="material-symbols-outlined text-[18px]"
                                  >inventory_2</span
                                >
                              </span>
                              <span
                                class="font-bold text-text-main-light dark:text-white"
                                >Bàn giao thiết bị</span
                              >
                            </div>
                            <span
                              class="text-xs font-medium text-text-sub-light dark:text-text-sub-dark whitespace-nowrap"
                              >05/05/2024, 14:00</span
                            >
                          </div>
                          <p
                            class="text-sm text-text-sub-light dark:text-text-sub-dark"
                          >
                            Đã hoàn trả 02 bộ đàm cầm tay sau đợt diễn tập. Tình
                            trạng thiết bị: Tốt.
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <button
                    class="w-full mt-6 text-sm text-text-sub-light dark:text-text-sub-dark hover:text-primary font-medium flex items-center justify-center gap-1 py-2 border-t border-border-light dark:border-border-dark"
                  >
                    Xem thêm hoạt động
                    <span class="material-symbols-outlined text-[18px]"
                      >expand_more</span
                    >
                  </button>
                </div>

                <!-- Equipment & Training Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <!-- Equipment Table -->
                  <div
                    class="bg-white dark:bg-card-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark flex flex-col h-full"
                  >
                    <div
                      class="px-6 py-4 border-b border-border-light dark:border-border-dark flex justify-between items-center"
                    >
                      <h3
                        class="text-base font-bold text-text-main-light dark:text-white"
                      >
                        Thiết bị đang quản lý
                      </h3>
                      <a
                        class="text-xs font-medium text-primary hover:underline"
                        href="#"
                        >Xem chi tiết</a
                      >
                    </div>
                    <div class="p-0 flex-1">
                      <table class="w-full text-left text-sm">
                        <thead
                          class="bg-gray-50 dark:bg-background-dark text-text-sub-light dark:text-text-sub-dark font-medium text-xs uppercase"
                        >
                          <tr>
                            <th class="px-6 py-3">Tên thiết bị</th>
                            <th class="px-6 py-3">Mã số</th>
                            <th class="px-6 py-3 text-right">Trạng thái</th>
                          </tr>
                        </thead>
                        <tbody
                          class="divide-y divide-border-light dark:divide-border-dark"
                        >
                          <tr
                            class="hover:bg-gray-50/50 dark:hover:bg-background-dark/50"
                          >
                            <td
                              class="px-6 py-3 font-medium text-text-main-light dark:text-white"
                            >
                              Bộ đàm Motorola
                            </td>
                            <td
                              class="px-6 py-3 text-text-sub-light dark:text-text-sub-dark"
                            >
                              RD-002
                            </td>
                            <td class="px-6 py-3 text-right">
                              <span
                                class="inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium bg-green-50 text-green-700 border border-green-100"
                                >Tốt</span
                              >
                            </td>
                          </tr>
                          <tr
                            class="hover:bg-gray-50/50 dark:hover:bg-background-dark/50"
                          >
                            <td
                              class="px-6 py-3 font-medium text-text-main-light dark:text-white"
                            >
                              Mũ cứng dân quân
                            </td>
                            <td
                              class="px-6 py-3 text-text-sub-light dark:text-text-sub-dark"
                            >
                              MC-105
                            </td>
                            <td class="px-6 py-3 text-right">
                              <span
                                class="inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium bg-green-50 text-green-700 border border-green-100"
                                >Tốt</span
                              >
                            </td>
                          </tr>
                          <tr
                            class="hover:bg-gray-50/50 dark:hover:bg-background-dark/50"
                          >
                            <td
                              class="px-6 py-3 font-medium text-text-main-light dark:text-white"
                            >
                              Đèn pin siêu sáng
                            </td>
                            <td
                              class="px-6 py-3 text-text-sub-light dark:text-text-sub-dark"
                            >
                              DP-044
                            </td>
                            <td class="px-6 py-3 text-right">
                              <span
                                class="inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium bg-yellow-50 text-yellow-700 border border-yellow-100"
                                >Cần kiểm tra</span
                              >
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>

                  <!-- Training Results -->
                  <div
                    class="bg-white dark:bg-card-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark flex flex-col h-full"
                  >
                    <div
                      class="px-6 py-4 border-b border-border-light dark:border-border-dark flex justify-between items-center"
                    >
                      <h3
                        class="text-base font-bold text-text-main-light dark:text-white"
                      >
                        Kết quả huấn luyện
                      </h3>
                      <a
                        class="text-xs font-medium text-primary hover:underline"
                        href="#"
                        >Toàn bộ hồ sơ</a
                      >
                    </div>
                    <div class="p-6 space-y-4">
                      <div class="flex gap-4 items-start">
                        <div
                          class="size-12 rounded-lg bg-primary/10 flex-shrink-0 flex items-center justify-center text-primary font-bold border border-primary/20"
                        >
                          9.5
                        </div>
                        <div>
                          <h4
                            class="text-sm font-bold text-text-main-light dark:text-white leading-tight mb-1"
                          >
                            Bắn đạn thật (CKC)
                          </h4>
                          <p
                            class="text-xs text-text-sub-light dark:text-text-sub-dark"
                          >
                            Hoàn thành: 12/2023
                          </p>
                          <div
                            class="mt-2 w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"
                          >
                            <div
                              class="bg-primary h-1.5 rounded-full"
                              style="width: 95%"
                            ></div>
                          </div>
                        </div>
                      </div>
                      <div
                        class="border-t border-border-light dark:border-border-dark"
                      ></div>
                      <div class="flex gap-4 items-start">
                        <div
                          class="size-12 rounded-lg bg-olive/10 flex-shrink-0 flex items-center justify-center text-olive font-bold border border-olive/20"
                        >
                          8.0
                        </div>
                        <div>
                          <h4
                            class="text-sm font-bold text-text-main-light dark:text-white leading-tight mb-1"
                          >
                            Võ thuật chiến đấu
                          </h4>
                          <p
                            class="text-xs text-text-sub-light dark:text-text-sub-dark"
                          >
                            Hoàn thành: 08/2023
                          </p>
                          <div
                            class="mt-2 w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"
                          >
                            <div
                              class="bg-olive h-1.5 rounded-full"
                              style="width: 80%"
                            ></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </div>

          <!-- THÊM/CHỈNH SỬA NHÂN SỰ -->
          <div x-show="currentView === 'edit'" x-cloak>
            <div class="flex flex-wrap justify-between gap-4 items-end mb-8">
              <div class="flex flex-col gap-2">
                <h1
                  class="text-3xl font-black tracking-tight text-text-main-light dark:text-white"
                >
                  Thêm/Chỉnh Sửa Nhân Sự
                </h1>
                <p
                  class="text-text-sub-light dark:text-text-sub-dark text-base"
                >
                  Điền thông tin chi tiết để cập nhật hồ sơ chiến sĩ dân quân.
                </p>
              </div>
              <div class="flex gap-3">
                <button
                  @click="currentView = 'list'"
                  class="flex items-center justify-center rounded-lg h-10 px-4 bg-white dark:bg-card-dark border border-border-light dark:border-border-dark text-text-main-light dark:text-white text-sm font-bold shadow-sm hover:bg-slate-50 dark:hover:bg-background-dark transition-colors"
                >
                  Hủy bỏ
                </button>
                <button
                  class="flex items-center justify-center rounded-lg h-10 px-6 bg-primary hover:bg-primary-dark text-white text-sm font-bold shadow-md transition-colors gap-2"
                >
                  <span class="material-symbols-outlined text-[20px]"
                    >save</span
                  >
                  Lưu hồ sơ
                </button>
              </div>
            </div>

            <!-- Form Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 mt-2">
              <!-- Left Column: Avatar & Status -->
              <div class="lg:col-span-4 flex flex-col gap-6">
                <!-- Upload Card -->
                <div
                  class="bg-white dark:bg-card-dark rounded-xl p-6 shadow-sm border border-border-light dark:border-border-dark"
                >
                  <h3
                    class="text-text-main-light dark:text-white text-lg font-bold mb-4"
                  >
                    Ảnh hồ sơ
                  </h3>
                  <div
                    class="flex flex-col items-center gap-6 rounded-lg border-2 border-dashed border-border-light dark:border-border-dark px-6 py-10 bg-slate-50 dark:bg-background-dark hover:bg-slate-100 dark:hover:bg-background-dark/80 transition-colors cursor-pointer group"
                  >
                    <div
                      class="size-24 rounded-full bg-slate-200 dark:bg-gray-700 flex items-center justify-center text-text-sub-light dark:text-text-sub-dark"
                    >
                      <span class="material-symbols-outlined text-[40px]"
                        >person_add</span
                      >
                    </div>
                    <div class="flex flex-col items-center gap-1 text-center">
                      <p
                        class="text-text-main-light dark:text-white text-sm font-bold group-hover:text-primary transition-colors"
                      >
                        Nhấp để tải ảnh lên
                      </p>
                      <p
                        class="text-text-sub-light dark:text-text-sub-dark text-xs"
                      >
                        PNG, JPG tối đa 5MB
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Status Card -->
                <div
                  class="bg-white dark:bg-card-dark rounded-xl p-6 shadow-sm border border-border-light dark:border-border-dark"
                >
                  <h3
                    class="text-text-main-light dark:text-white text-lg font-bold mb-4"
                  >
                    Trạng thái công tác
                  </h3>
                  <div class="flex flex-col gap-4">
                    <div class="flex items-center gap-3">
                      <input
                        checked
                        class="w-4 h-4 text-primary bg-gray-100 border-gray-300 focus:ring-primary focus:ring-2"
                        id="status_active"
                        name="status"
                        type="radio"
                      />
                      <label
                        class="text-sm font-medium text-text-main-light dark:text-white"
                        for="status_active"
                        >Đang hoạt động</label
                      >
                    </div>
                    <div class="flex items-center gap-3">
                      <input
                        class="w-4 h-4 text-primary bg-gray-100 border-gray-300 focus:ring-primary focus:ring-2"
                        id="status_temp"
                        name="status"
                        type="radio"
                      />
                      <label
                        class="text-sm font-medium text-text-main-light dark:text-white"
                        for="status_temp"
                        >Tạm hoãn</label
                      >
                    </div>
                    <div class="flex items-center gap-3">
                      <input
                        class="w-4 h-4 text-primary bg-gray-100 border-gray-300 focus:ring-primary focus:ring-2"
                        id="status_out"
                        name="status"
                        type="radio"
                      />
                      <label
                        class="text-sm font-medium text-text-main-light dark:text-white"
                        for="status_out"
                        >Xuất ngũ / Thôi việc</label
                      >
                    </div>
                  </div>
                </div>
              </div>

              <!-- Right Column: Detail Form -->
              <div class="lg:col-span-8 flex flex-col gap-6">
                <!-- Personal Info Section -->
                <div
                  class="bg-white dark:bg-card-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark overflow-hidden"
                >
                  <div
                    class="p-6 border-b border-border-light dark:border-border-dark"
                  >
                    <h2
                      class="text-text-main-light dark:text-white text-xl font-bold"
                    >
                      Thông tin cá nhân
                    </h2>
                  </div>
                  <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="flex flex-col gap-2">
                      <label
                        class="text-text-main-light dark:text-white text-sm font-medium"
                        >Tên đầy đủ <span class="text-red-500">*</span></label
                      >
                      <input
                        class="form-input w-full rounded-lg border-none bg-slate-100 dark:bg-background-dark text-text-main-light dark:text-white placeholder:text-text-sub-light px-4 py-2.5 focus:ring-2 focus:ring-primary transition-all"
                        placeholder="Nguyễn Văn A"
                        type="text"
                      />
                    </div>
                    <div class="flex flex-col gap-2">
                      <label
                        class="text-text-main-light dark:text-white text-sm font-medium"
                        >Số CMND/CCCD <span class="text-red-500">*</span></label
                      >
                      <input
                        class="form-input w-full rounded-lg border-none bg-slate-100 dark:bg-background-dark text-text-main-light dark:text-white placeholder:text-text-sub-light px-4 py-2.5 focus:ring-2 focus:ring-primary transition-all"
                        placeholder="00109xxxxxxx"
                        type="text"
                      />
                    </div>
                    <div class="flex flex-col gap-2">
                      <label
                        class="text-text-main-light dark:text-white text-sm font-medium"
                        >Ngày sinh</label
                      >
                      <input
                        class="form-input w-full rounded-lg border-none bg-slate-100 dark:bg-background-dark text-text-main-light dark:text-white px-4 py-2.5 focus:ring-2 focus:ring-primary transition-all"
                        type="date"
                      />
                    </div>
                    <div class="flex flex-col gap-2">
                      <label
                        class="text-text-main-light dark:text-white text-sm font-medium"
                        >Giới tính</label
                      >
                      <select
                        class="form-select w-full rounded-lg border-none bg-slate-100 dark:bg-background-dark text-text-main-light dark:text-white px-4 py-2.5 focus:ring-2 focus:ring-primary transition-all"
                      >
                        <option>Nam</option>
                        <option>Nữ</option>
                      </select>
                    </div>
                    <div class="flex flex-col gap-2">
                      <label
                        class="text-text-main-light dark:text-white text-sm font-medium"
                        >Số điện thoại
                        <span class="text-red-500">*</span></label
                      >
                      <div
                        class="flex items-center bg-slate-100 dark:bg-background-dark rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-primary"
                      >
                        <div
                          class="pl-4 text-text-sub-light dark:text-text-sub-dark"
                        >
                          <span class="material-symbols-outlined text-[20px]"
                            >call</span
                          >
                        </div>
                        <input
                          class="form-input w-full border-none bg-transparent text-text-main-light dark:text-white placeholder:text-text-sub-light px-4 py-2.5 focus:ring-0"
                          placeholder="090 123 4567"
                          type="tel"
                        />
                      </div>
                    </div>
                    <div class="flex flex-col gap-2">
                      <label
                        class="text-text-main-light dark:text-white text-sm font-medium"
                        >Email</label
                      >
                      <div
                        class="flex items-center bg-slate-100 dark:bg-background-dark rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-primary"
                      >
                        <div
                          class="pl-4 text-text-sub-light dark:text-text-sub-dark"
                        >
                          <span class="material-symbols-outlined text-[20px]"
                            >mail</span
                          >
                        </div>
                        <input
                          class="form-input w-full border-none bg-transparent text-text-main-light dark:text-white placeholder:text-text-sub-light px-4 py-2.5 focus:ring-0"
                          placeholder="email@example.com"
                          type="email"
                        />
                      </div>
                    </div>
                    <div class="flex flex-col gap-2 md:col-span-2">
                      <label
                        class="text-text-main-light dark:text-white text-sm font-medium"
                        >Địa chỉ thường trú</label
                      >
                      <textarea
                        class="form-textarea w-full rounded-lg border-none bg-slate-100 dark:bg-background-dark text-text-main-light dark:text-white placeholder:text-text-sub-light px-4 py-2.5 focus:ring-2 focus:ring-primary transition-all resize-none"
                        placeholder="Nhập địa chỉ chi tiết..."
                        rows="3"
                      ></textarea>
                    </div>
                  </div>
                </div>

                <!-- Military Info Section -->
                <div
                  class="bg-white dark:bg-card-dark rounded-xl shadow-sm border border-border-light dark:border-border-dark overflow-hidden"
                >
                  <div
                    class="p-6 border-b border-border-light dark:border-border-dark"
                  >
                    <h2
                      class="text-text-main-light dark:text-white text-xl font-bold"
                    >
                      Thông tin quân sự & Công tác
                    </h2>
                  </div>
                  <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="flex flex-col gap-2">
                      <label
                        class="text-text-main-light dark:text-white text-sm font-medium"
                        >Chức vụ / Vai trò</label
                      >
                      <select
                        class="form-select w-full rounded-lg border-none bg-slate-100 dark:bg-background-dark text-text-main-light dark:text-white px-4 py-2.5 focus:ring-2 focus:ring-primary transition-all"
                      >
                        <option>Chiến sĩ</option>
                        <option>Tiểu đội trưởng</option>
                        <option>Trung đội trưởng</option>
                        <option>Chỉ huy phó</option>
                        <option>Chỉ huy trưởng</option>
                      </select>
                    </div>
                    <div class="flex flex-col gap-2">
                      <label
                        class="text-text-main-light dark:text-white text-sm font-medium"
                        >Đội hình chính</label
                      >
                      <select
                        class="form-select w-full rounded-lg border-none bg-slate-100 dark:bg-background-dark text-text-main-light dark:text-white px-4 py-2.5 focus:ring-2 focus:ring-primary transition-all"
                      >
                        <option>Trung đội cơ động</option>
                        <option>Tiểu đội dân quân thường trực</option>
                        <option>Tiểu đội tại chỗ Khu phố 1</option>
                        <option>Tiểu đội tại chỗ Khu phố 2</option>
                      </select>
                    </div>
                    <div class="flex flex-col gap-2 md:col-span-2">
                      <label
                        class="text-text-main-light dark:text-white text-sm font-medium"
                        >Đội hình bổ sung / Tổ chuyên trách</label
                      >
                      <div
                        class="w-full rounded-lg bg-slate-100 dark:bg-background-dark px-2 py-2 focus-within:ring-2 focus-within:ring-primary transition-all min-h-[46px] flex flex-wrap gap-2 items-center"
                      >
                        <div
                          class="flex items-center gap-1 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded px-2 py-1"
                        >
                          <span
                            class="text-xs font-medium text-text-main-light dark:text-white"
                            >Tổ PCCC</span
                          >
                          <button class="text-slate-400 hover:text-red-500">
                            <span class="material-symbols-outlined text-[16px]"
                              >close</span
                            >
                          </button>
                        </div>
                        <div
                          class="flex items-center gap-1 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded px-2 py-1"
                        >
                          <span
                            class="text-xs font-medium text-text-main-light dark:text-white"
                            >Tổ trật tự đô thị</span
                          >
                          <button class="text-slate-400 hover:text-red-500">
                            <span class="material-symbols-outlined text-[16px]"
                              >close</span
                            >
                          </button>
                        </div>
                        <input
                          class="bg-transparent border-none focus:ring-0 p-0 text-sm min-w-[120px] text-text-main-light dark:text-white placeholder:text-text-sub-light"
                          placeholder="Thêm đội hình..."
                          type="text"
                        />
                      </div>
                      <p
                        class="text-xs text-text-sub-light dark:text-text-sub-dark"
                      >
                        Nhập tên và nhấn Enter để thêm mới.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <script src="sample-data.js"></script>
    <script>
      function personnelApp() {
        return {
          currentView: "list",
          selectedPerson: null,
          personnel: [],

          init() {
            // Load from dqp10_users (from sample-data.js)
            if (typeof dqp10_users !== "undefined") {
              const avatars = [
                "https://lh3.googleusercontent.com/aida-public/AB6AXuC4do5EC_yF_8EZbtzhtRnKecAC-TYM8q50dPpcgJxnC7uB8BKtEESrjZ6w3dnV9sQMJb1tFSSNnslV9Bt50WncB7q80W3UjJVpaS4nT8df82kl5XIYDUE1vCv5qDkSj6Z4cTqMYTEpIO1Clzb4yYxHIulswhUUPNVa47H4mt13EWYgITymdFT0g6vNP90thPR8qZbeeg8GOhdnU5Ax_v8jn6Wo_eEo_OQoP-GpChUKHygMzsvQ9svxCLJp1TcphAZj9A0Dgcnlkew",
                "https://lh3.googleusercontent.com/aida-public/AB6AXuD5AOvjHKU_7LxVMkyBeu_1-QA_YfFwHtPcFi1TCdDt6FEn-s8hUjgmBWEY3gFY1_ej1VAbOLDi4Au6zkwVaLbM2S6cWSQeUrl-fUpJCG79TkVbiqcXDcMycFdLYgBFcvpUeg_ta8zCki0AgQGAJ5T8MI5mSMc5ONmATB-yQvhHr8UpbIRnUB9iaIZh86OdymGEdTfU21TCaC1kzRysSR21d5V33OP5AcYNtFeki1cogXA9xJt4dtUPrS6WwYMto3Bj9kMKCCwpwLA",
                "https://lh3.googleusercontent.com/aida-public/AB6AXuD3sgU8mItvzWk4CrPzW6XuIKBtoKGA9h1Chjzh7BE9Jq2UG3TnHyRa1qWHcVIBfH01Q5okV1RyDMaT06AyD9965Pl-K1wDjgFfK6k6tE6C1vd2_LY5sXKIYKRDj3xGx-s7OcPCjEuqC2zblTkojNjidaPfPjji-xqXyO5yUovqw7PCJuBfqENruSC8M-6QgOE14QQYmM_4hJqsW8D12w1hOj41wlTYLvcOcuicRjBgv0TmmJ52VAfuC_WwFsJDLiEQv3FAEBpcT4Q",
                "https://lh3.googleusercontent.com/aida-public/AB6AXuBGepP6QA7CSbcprMOS644xGrF2M2dQAUwbecJ21GXfm2ucwkm0jNlOOMB6YgQeA-56KTI8qE_-eaSKv9j1AAQg1ICtACrR6A6tLhaC6JLe3QToYrGBL_scVgSkCtbdIDum1IlOZ2yH2oH4n4yiaw_7zxL3LhT3lOQOJPHRNKUMPa208n8abm0ojMm72r9DIy37dWsztful-07L0D8kp50P0r1C5Sj4bpMsMI_fnse9hGEldfrRk-yJ3dxIqFJDGOonolpJvfWE6hs",
                "https://lh3.googleusercontent.com/aida-public/AB6AXuCcBuibAZ8VNcJ8U65GwsaUcKM4XhxhAN0-eAJUnZ0i6AM2Rx4I41HRPwW2qGHMK0Srgi75eNHTJNsxWYmb1C1g-4jwXtrZbTteoGbMBSDhHnDRISBmOMoLiosXteUtRv2RAEuOrf3Lze1Y8tcTtyuSD7mqvWLhqtQxGRIKIM5yCbwNV__ULkCUAhWXozvCSQ9Vmldd0nZfaL_cNqFKURwPaybzH3itPmwTCsNEy8JpZcg1mZU1YM4uhQYjtAUjYOrZYKQ2dBsaETE",
                "https://lh3.googleusercontent.com/aida-public/AB6AXuCgOVunDG0YbId7I37fg8bDWhNi3Yz0nPCGCxYdzsx0WdaHM2S9X3a9nKu8CjTxlU8vJpaWJWxTwgvFn1xrgHakDQG7eR6XAZmCX2GLsxEKla2-IldqHMyf-YQK7u20_BkMGRRuuBYFZ7hKKpVJgLwJJ2yqTuMsIHMqHivqvFEoiWlRtc-XZ5F8k9HD0wQ1PAf9dyY1P1prOvpZSxzj95eMByvLQCmRSpHF8qd5_CAIZf12qwhoVJ16Ruz76ryNjWrJ5Ah4KGEVRwk",
              ];
              const statuses = [
                "active",
                "active",
                "active",
                "active",
                "leave",
                "retired",
              ];
              const statusLabels = {
                active: "Hoạt động",
                leave: "Nghỉ phép",
                retired: "Đã giải ngũ",
              };

              this.personnel = dqp10_users.map((user, index) => {
                const status = statuses[index % statuses.length];
                const year = 1990 + Math.floor(Math.random() * 10);
                const month = String(
                  Math.floor(Math.random() * 12) + 1,
                ).padStart(2, "0");
                const day = String(Math.floor(Math.random() * 28) + 1).padStart(
                  2,
                  "0",
                );

                return {
                  id: index + 1,
                  name: user.name,
                  unit: `Tiểu đội Dân quân ${user.team}`,
                  role: "DQTT",
                  status: status,
                  statusLabel: statusLabels[status],
                  avatar: avatars[index % avatars.length],
                  code: `DQTT-${String(index + 1).padStart(3, "0")}`,
                  dob: `${day}/${month}/${year}`,
                  phone: `09${String(Math.floor(Math.random() * 90000000 + 10000000))}`,
                  email: `${user.name
                    .toLowerCase()
                    .replace(/\s+/g, "")
                    .normalize("NFD")
                    .replace(/[\u0300-\u036f]/g, "")}@email.com`,
                  address: `${Math.floor(Math.random() * 999 + 1)} Đường ${["Lê Lợi", "Nguyễn Huệ", "Trần Hưng Đạo", "CMT8"][index % 4]}, P.Bình Phú`,
                  team: user.team,
                };
              });
            }
          },

          selectPerson(person) {
            this.selectedPerson = person;
          },
        };
      }
    </script>
  </body>
</html>
